# Environment configuration for SitSmart
# Copy this file to .env and adjust values as needed.

# ============================================================================
# Application Configuration
# ============================================================================

# Time window in seconds for aggregating posture features on server
FEATURE_BUFFER_SECONDS=12

# Minimum seconds between notifications (cooldown)
# Effective cooldown defaults to max(FEATURE_BUFFER_SECONDS, NOTIFICATION_COOLDOWN_SECONDS)
NOTIFICATION_COOLDOWN_SECONDS=15

# ML probability threshold to trigger notification (initial threshold for RL)
ML_BAD_PROB_THRESHOLD=0.6

# Webhook URL for delivering notifications (server will POST Notification JSON)
NOTIFICATION_WEBHOOK_URL=http://127.0.0.1:8000/api/notifications/webhook

# Optional: external analyze service base URL (unused by default)
# NOTIFICATION_ANALYZE_BASE_URL=

# ============================================================================
# Reinforcement Learning Configuration
# ============================================================================

# Step size for threshold adjustments (actions: -eta, 0, +eta)
# Larger = faster adaptation but more jitter
RL_THRESHOLD_STEP=0.03

# Hard limits for notification threshold (prevents extreme values)
RL_TAU_MIN=0.5
RL_TAU_MAX=0.95

# Target quantiles for adaptive band boundaries
# Low delta < L → raise threshold, delta > H → lower threshold
RL_BAND_Q_LOW=0.3
RL_BAND_Q_HIGH=0.6

# Learning rate for online quantile estimation (Robbins-Monro)
# Lower = slower adaptation
RL_BAND_Q_LR=0.03

# ============================================================================
# History Service Configuration
# ============================================================================

# Delta computation window in seconds (time to wait before computing delta)
RL_DELTA_RANGE_SECONDS=8.0
